<!DOCTYPE html>
<html lang="en">

<head>
  <% include ./partials/head.ejs %>
  <link href="/css/custom.css" rel="stylesheet">
  <link href="/css/resume.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
</head>

<body id="page-top">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
      <!-- view/partial/navbar.ejs-->
      <% include ./partials/navbaradmin %> 
    </nav>
    <div class="container-fluid p-0" >
      <section class=" p-lg-4 " id="update">
        <form method="POST" action="/newpassword" id="password">
          <div class="my-auto item" id="personal" style="margin-left:0%;margin-top:19%;">

            <h4><label for="OldPassword" style="color:black;font-size:35px;margin-left:43%;">Old Password</label></h4>
            <input id="OldPassword" type="password" name="OldPassword" style="width: 30%;padding:5px;border-radius:4px;margin-left:35%;" required />
          </br></br></br>
            <h4><label for="NewPassword<" style="color:black;font-size:35px;margin-left:43%;">New Password</label></h4>
            <input id="NewPassword<" type="password" name="NewPassword" style="width: 30%;padding:5px;border-radius:4px;margin-left:35%;"
              required />
            </br></br></br>
            <button class="btn btn--radius-2 btn--red" type="submit" style="margin-left:47.5%; "> Change </button>
          </div>
        </form>
      </section>
    </div>
    
    <% include ./partials/bootjs %>
    <script>
      $( "#password" ).submit(function( event ) {

          // Stop form from submitting normally
          event.preventDefault();

          // Get some values from elements on the page:
          var $form = $( this ),
            term1 = $form.find( "input[name='OldPassword']" ).val(),
            term2 = $form.find( "input[name='NewPassword']" ).val(),
            url = $form.attr( "action" );

            console.log(url,term1,term2);


          // Send the data using post
          var posting = $.post( url, { OldPassword: term1, NewPassword: term2 } );


          // Put the results in a div
          posting.done(function( data ) {
            if(data["success"] == true )
              alert("Password changed successfully");
            else
            alert("Old password not found in database");
          });
      });
    </script>

</body>

</html>